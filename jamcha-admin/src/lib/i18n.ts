import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// Extend i18n type to allow custom properties
declare module 'i18next' {
  interface i18n {
    isRTL?: (lng?: string) => boolean;
    dir?: (lng?: string) => 'rtl' | 'ltr';
  }
}

// Configure direction detection
const rtlLanguages = ['ar', 'he', 'fa', 'ur'];

// Add direction detection function before initialization
const getLanguageDirection = (lng?: string): 'rtl' | 'ltr' => {
  const language = lng || 'ar'; // default to Arabic
  return rtlLanguages.includes(language) ? 'rtl' : 'ltr';
};

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    debug: true,
    lng: 'ar', // Force Arabic as default
    fallbackLng: 'ar',
    interpolation: {
      escapeValue: false, // not needed for react as it escapes by default
    },
    // Add direction detection
    detection: {
      order: ['localStorage'], // Only use localStorage, not browser detection
      caches: ['localStorage'],
    },
    resources: {
      en: {
        translation: {
          "cannotDisableLastLanguage": "Cannot Disable Last Language",
          "atLeastOneLanguageMustBeEnabled": "At least one language must be enabled",
          "articleWithThisSlugAlreadyExists": "Article with this slug already exists",
          "articleIsDisabled": "This article is disabled and cannot be previewed.",
          "createTopFlopEntrySuccess": "Top-Flop entry created successfully!",
          "updateTopFlopEntrySuccess": "Top-Flop entry updated successfully!",
          "Cannot delete category. It contains articles that must be moved or deleted first.": "Cannot delete category. It contains articles that must be moved or deleted first.",
        "socialLinkRemoved": "Social Link Removed",
        "socialLinkRemovedSuccess": "The social media link has been successfully removed.",
        "emptySocialLinkTitle": "Empty Social Link URL",
        "emptySocialLinkDesc": "Please provide a URL for all social media links or remove the empty ones.",
        }
      },
      ar: {
        translation: {
          "cannotDisableLastLanguage": "لا يمكن تعطيل اللغة الأخيرة",
          "atLeastOneLanguageMustBeEnabled": "يجب تمكين لغة واحدة على الأقل",
          "articleWithThisSlugAlreadyExists": "مقال بهذا المعرف موجود بالفعل",
          "articleIsDisabled": "هذا المقال معطّل ولا يمكن معاينته.",
          "deleteCategoryErrorDescription": "لا يمكن حذف القسم لأنه يحتوي على مقالات. يرجى حذف أو نقل المقالات أولاً.",
          "failedToFetchPodcastVideos": "فشل في جلب فيديوهات البودكاست",
          "failedToUpdatePodcast": "فشل في تحديث البودكاست",
          "failedToCreatePodcast": "فشل في إنشاء البودكاست",
          "videoUpdatedSuccessfully": "تم تحديث الفيديو بنجاح",
          "videoAddedSuccessfully": "تمت إضافة الفيديو بنجاح",
          "anErrorOccurred": "حدث خطأ",
          "videoDeletedSuccessfully": "تم حذف الفيديو بنجاح",
          "failedToDeleteVideo": "فشل في حذف الفيديو",
          "topFlopAdminDescription": "إدارة إدخالات جا و مشا الأسبوعية",
          "addPerson": "إضافة شخص",
          "editPerson": "تعديل شخص",
          "addNewPerson": "إضافة شخص جديد",
          "personNameLabel": "اسم الشخص",
          "slugLabel": "المعرف اللطيف (Slug)",
          "entryTypeLabel": "نوع الإدخال",
          "positionLabel": "المركز",
          "descriptionLabel": "الوصف",
          "reasonLabel": "السبب",
          "categoryLabel": "الفئة",
          "authorLabel": "المؤلف",
          "weekLabel": "أسبوع",
          "languageLabel": "اللغة",
          "profileImageLabel": "صورة الملف الشخصي",
          "profileImagePlaceholder": "https://example.com/image.png",
          "displayOrderLabel": "ترتيب العرض",
          "entryTypeTop": "الأفضل",
          "entryTypeFlop": "الأسوأ",
          "categoryPlaceholder": "مثال: سياسة",
          "authorPlaceholder": "مثال: جون دو",
          "uncategorized": "غير مصنف",
          "pageViewsCount": "{{count}} مشاهدة",
          "visitorsCount": "{{count}} زائر",
          "topFlopAdminTitle": "إدارة جا / مشا",
          "addNewVideo": "إضافة فيديو جديد",
          "authorInformation": "معلومات الكاتب",
          "publish": "نشر",
          "languageSettings": "إعدادات اللغة",
          "languageConfiguration": "تكوين اللغة",
          "languageConfigurationDescription": "إدارة اللغات المتاحة للمحتوى الخاص بك وتعيين اللغة الافتراضية.",
          "code": "الرمز",
          "enabled": "ممكّن",
          "disabled": "معطّل",
          "setAsDefault": "تعيين كافتراضي",
          "default": "افتراضي",
          "rtl": "من اليمين إلى اليسار",
          "languageStatusSummary": "ملخص حالة اللغة",
          "enabledLanguages": "اللغات الممكّنة",
          "defaultLanguage": "اللغة الافتراضية",
          "rtlLanguages": "لغات RTL",
          "none": "لا شيء",
          "failedToFetchLanguageSettings": "فشل في جلب إعدادات اللغة",
          "failedToUpdateLanguageSettings": "فشل في تحديث إعدادات اللغة",
          "success": "نجاح",
          "languageSettingsUpdatedSuccessfully": "تم تحديث إعدادات اللغة بنجاح",
          "dummyFileName": "dummy.txt",
          "anonymousAuthorEmail": "author@jamcha.com",
          "failedToFetchLanguages": "فشل في جلب اللغات",
          "noAuthToken": "لا يوجد رمز مصادقة",
          "anonymousAuthor": "مؤلف مجهول",
          "failedToCreateArticle": "فشل في إنشاء المقال",
          "articleCreatedSuccessfully": "تم إنشاء المقال بنجاح",
          "articlePublishedSuccessfully": "تم نشر المقال بنجاح",
          "failedToCreateArticleTitle": "فشل في إنشاء المقال",
          "missingRequiredFields": "الحقول المطلوبة مفقودة",
          "fillInTitleContentCategory": "يرجى ملء حقول العنوان والمحتوى والفئة",
          "writeAndPublish": "اكتب وانشر مقالاتك",
          "publishing": "جار النشر...",
          "articleContent": "محتوى المقال",
          "articleUrlSlugAutoGenerated": "سيتم إنشاؤه تلقائيًا من العنوان",
          "articleSettings": "إعدادات المقال",
          "seniorReporterExample2": "مثال: مراسل أول",
          "uploadImage": "تحميل صورة",
          "uploadImageFile": "(ملف صورة، بحد أقصى 5 ميجابايت)",
          "or": "أو",
          "imageUrl": "رابط الصورة",
          "imageUrlExample": "https://example.com/image.jpg",
          "provideImageUrl": "أدخل رابط صورة",
          "creating": "جار الإنشاء...",
          "loadingUsers": "جاري تحميل المستخدمين...",
          "missingFields": "الحقول المطلوبة مفقودة",
          "missingFieldsDescription": "يرجى ملء جميع الحقول المطلوبة (اسم المستخدم، البريد الإلكتروني، وكلمة المرور)",
          "passwordTooShort": "كلمة المرور قصيرة جداً",
          "usersAndSubscribers": "المستخدمون والمشتركون",
          "manageUsersAndSubscribers": "إدارة حسابات المستخدمين ومشتركي النشرة الإخبارية",
          "newUser": "مستخدم جديد",
          "editUser": "تعديل المستخدم",
          "createNewUser": "إنشاء مستخدم جديد",
          "updateUserDescription": "تحديث تفاصيل المستخدم.",
          "createUserDescription": "املأ التفاصيل لإنشاء مستخدم جديد.",
          "username": "اسم المستخدم",
          "firstName": "الاسم الأول",
          "lastName": "اسم العائلة",
          "email": "البريد الإلكتروني",
          "role": "الدور",
          "admin": "مدير",
          "author": "كاتب",
          "newPasswordLabel": "كلمة المرور الجديدة (اتركها فارغة للاحتفاظ بالحالية)",
          "password": "كلمة المرور",
          "update": "تحديث",
          "create": "إنشاء",
          "cancel": "إلغاء",
          "totalUsers": "إجمالي المستخدمين",
          "newsletterSubscribers": "مشتركو النشرة الإخبارية",
          "activeAuthors": "الكتاب النشطون",
          "admins": "المدراء",
          "newsletterSubscribersWithCount": "مشتركو النشرة الإخبارية ({{count}})",
          "noNewsletterSubscribersYet": "لا يوجد مشتركون في النشرة الإخبارية بعد",
          "subscribedDate": "تاريخ الاشتراك",
          "status": "الحالة",
          "actions": "الإجراءات",
          "active": "نشط",
          "inactive": "غير نشط",
          "copy": "نسخ",
          "userManagement": "إدارة المستخدمين",
          "searchUsersPlaceholder": "البحث عن المستخدمين...",
          "filterByRole": "تصفية حسب الدور",
          "allRoles": "جميع الأدوار",
          "user": "مستخدم",
          "articles": "المقالات",
          "joined": "انضم في",
          "lastLogin": "آخر تسجيل دخول",
          "never": "أبداً",
          "dayMon": "الاثنين",
          "dayTue": "الثلاثاء",
          "dayWed": "الأربعاء",
          "dayThu": "الخميس",
          "dayFri": "الجمعة",
          "daySat": "السبت",
          "daySun": "الأحد",
          "dateFormat": "{{date, datetime}}",
          "adminPortal": "بوابة الإدارة",
          "loginToCms": "تسجيل الدخول إلى نظام إدارة المحتوى",
          "usernameOrEmail": "اسم المستخدم أو البريد الإلكتروني",
          "enterUsernameOrEmail": "أدخل اسم المستخدم أو البريد الإلكتروني",
          "signIn": "تسجيل الدخول",
          "signingIn": "جاري تسجيل الدخول...",
          "loginSuccessful": "تم تسجيل الدخول بنجاح",
          "welcomeBackUser": "مرحباً بعودتك، {{username}}!",
          "loginFailed": "فشل تسجيل الدخول",
          "invalidCredentials": "بيانات الاعتماد غير صحيحة",
          "checkingKeycloak": "جاري التحقق من Keycloak...",
          "keycloakOnline": "Keycloak متصل",
          "keycloakOffline": "Keycloak غير متصل",
          "keycloakOfflineWarning": "خادم المصادقة غير متصل. قد لا تتمكن من تسجيل الدخول.",
          "checkingKeycloakConnection": "جاري التحقق من اتصال Keycloak...",
          "keycloakOnlineReady": "خادم المصادقة جاهز.",
          "enterUsernamePassword": "يرجى إدخال اسم المستخدم وكلمة المرور.",
          "enterPassword": "أدخل كلمة المرور",
          "deleteUserTitle": "حذف المستخدم",
          "deleteUserDescription": "هل أنت متأكد من حذف '{{username}}'؟ هذا الإجراء لا يمكن التراجع عنه وسيزيل جميع بياناته.",
          "deleteUser": "حذف المستخدم",
          "removeSubscriberTitle": "إزالة المشترك",
          "removeSubscriberDescription": "هل أنت متأكد من إزالة '{{email}}' من النشرة الإخبارية؟ هذا الإجراء لا يمكن التراجع عنه.",
          "remove": "إزالة",
          "newsletterDeleteFailed": "فشل في حذف مشترك النشرة الإخبارية",
          "userDeleteFailedDetailed": "فشل في حذف المستخدم: {{status}} {{statusText}}. {{errorText}}",
          "userUpdateFailedDetailed": "فشل في تحديث المستخدم: {{status}} {{statusText}}. {{errorText}}",
          "userCreateFailedDetailed": "فشل في إنشاء المستخدم: {{status}} {{statusText}}. {{errorText}}",
          "userUpdateFailed": "فشل في تحديث المستخدم",
          "userUpdatedSuccess": "تم تحديث المستخدم بنجاح",
          "userCreateFailed": "فشل في إنشاء المستخدم",
          "userCreatedSuccess": "تم إنشاء المستخدم بنجاح",
          "noAuthTokenError": "لم يتم العثور على رمز المصادقة. يرجى تسجيل الدخول مرة أخرى.",
          "flopSectionTitle": "مشا (الأسوأ) - {{count}} شخصية",
          "edit": "تعديل",
          "personNameHeader": "الاسم",
          "reasonHeader": "السبب",
          "positionHeader": "المركز",
          "categoryHeader": "الفئة",
          "authorHeader": "المؤلف",
          "voteCountHeader": "عدد الأصوات",
          "actionsHeader": "الإجراءات",
          "loading": "جاري التحميل...",
          "topSectionTitle": "جا (الأفضل) - {{count}} شخصية",
          "deletePersonFailed": "فشل في حذف الشخصية",
          "errorOccurred": "حدث خطأ",
          "personDeletedSuccess": "تم حذف الشخصية بنجاح",
          "personRemovedFromList": "تم إزالة الشخصية من قائمة جا/مشا.",
          "personUpdatedSuccess": "تم تحديث الشخصية بنجاح",
          "personAddedSuccess": "تم إضافة الشخصية بنجاح",
          "deletePersonTitle": "حذف الشخصية",
          "deletePersonDescription": "هل أنت متأكد من حذف \"{{name}}\" من قائمة {{section}}؟ لا يمكن التراجع عن هذا الإجراء.",
          "confirmDeletePerson": "هل أنت متأكد من حذف \"{{name}}\"؟",
          "deleteTopFlopEntryFailed": "فشل في حذف إدخال القائمة",
          "updateTopFlopEntryFailed": "فشل في تحديث إدخال القائمة",
          "createTopFlopEntryFailed": "فشل في إنشاء إدخال القائمة",
          "fetchTopFlopDataFailed": "فشل في جلب بيانات القائمة",
          "notSpecified": "غير محدد",
          "fontFamilyInter": "Inter",
          "fontFamilyRoboto": "Roboto",
          "fontFamilyOpenSans": "Open Sans",
          "fontFamilyLato": "Lato",
          "fontSizeSmall": "صغير",
          "fontSizeMedium": "متوسط",
          "fontSizeLarge": "كبير",
          "securityFeaturesSection": "ميزات الأمان",
          "enableTwoFactorLabel": "تمكين المصادقة الثنائية",
          "limitLoginAttemptsLabel": "تحديد محاولات تسجيل الدخول",
          "enableIpBlockingLabel": "تمكين حظر عناوين IP",
          "enableSecurityLogsLabel": "تمكين سجلات الأمان",
          "saveSecuritySettingsButton": "حفظ إعدادات الأمان",
          "themeSettingsSection": "إعدادات المظهر",
          "primaryColorLabel": "اللون الأساسي",
          "secondaryColorLabel": "اللون الثانوي",
          "accentColorLabel": "لون التمييز",
          "fontSizeLabel": "حجم الخط",
          "fontFamilyLabel": "نوع الخط",
          "logoUrlLabel": "رابط الشعار",
          "faviconUrlLabel": "رابط أيقونة الموقع",
          "logoUrlPlaceholder": "https://example.com/logo.png",
          "faviconUrlPlaceholder": "https://example.com/favicon.ico",
          "saveThemeSettingsButton": "حفظ إعدادات المظهر",
          "maxLoginAttemptsLabel": "الحد الأقصى لمحاولات تسجيل الدخول",
          "passwordMinLengthLabel": "الحد الأدنى لطول كلمة المرور",
          "sessionTimeoutLabel": "انتهاء مهلة الجلسة (بالدقائق)",
          "securitySettingsSection": "إعدادات الأمان",
          "saveEmailSettingsButton": "حفظ إعدادات البريد الإلكتروني",
          "enableEmailNotificationsLabel": "تمكين إشعارات البريد الإلكتروني",
          "senderEmailLabel": "بريد المرسل الإلكتروني",
          "senderNameLabel": "اسم المرسل",
          "enterToChangePasswordPlaceholder": "أدخل لتغيير كلمة المرور",
          "smtpPasswordLabel": "كلمة مرور SMTP",
          "smtpUsernameLabel": "اسم مستخدم SMTP",
          "smtpPortLabel": "منفذ SMTP",
          "smtpHostLabel": "مضيف SMTP",
          "emailSettingsSection": "إعدادات البريد الإلكتروني",
          "saveGeneralSettingsButton": "حفظ الإعدادات العامة",
          "enableMultiLanguageLabel": "تمكين تعدد اللغات",
          "enableDarkModeLabel": "تمكين الوضع المظلم",
          "enableNewsletterSignupLabel": "تمكين الاشتراك في النشرة الإخبارية",
          "enableCommentsLabel": "تمكين التعليقات",
          "featuresSection": "الميزات",
          "articlesPerPageLabel": "المقالات لكل صفحة",
          "languageEnglish": "الإنجليزية",
          "languageSpanish": "الإسبانية",
          "languageFrench": "الفرنسية",
          "languageArabic": "العربية",
          "timezoneUTC": "التوقيت العالمي المنسق",
          "timezoneEastern": "التوقيت الشرقي",
          "timezonePacific": "التوقيت الهادئي",
          "timezoneLondon": "توقيت لندن",
          "timezoneTokyo": "توقيت طوكيو",
          "defaultLanguageLabel": "اللغة الافتراضية",
          "timezoneLabel": "المنطقة الزمنية",
          "settingsSavedSuccess": "تم حفظ الإعدادات بنجاح",
          "settingsSavedError": "فشل في حفظ الإعدادات",
          "defaultSiteName": "مجلة الأخبار العالمية",
          "defaultSiteDescription": "مصدرك الموثوق للأخبار والرؤى العالمية",
          "defaultSiteUrl": "https://globalnews.com",
          "defaultAdminEmail": "admin@globalnews.com",
          "defaultSmtpHost": "smtp.gmail.com",
          "defaultSmtpUser": "admin@globalnews.com",
          "defaultSenderName": "مجلة الأخبار العالمية",
          "defaultSenderEmail": "noreply@globalnews.com",
          "siteNameLabel": "اسم الموقع",
          "siteUrlLabel": "رابط الموقع",
          "siteDescriptionLabel": "وصف الموقع",
          "settingsDescription": "تكوين إعدادات موقعك الإلكتروني وتفضيلاتك",
          "generalTab": "عام",
          "emailTab": "البريد الإلكتروني",
          "securityTab": "الأمان",
          "themeTab": "المظهر",
          "generalSettings": "الإعدادات العامة",
          "breaking": "عاجل",
          "minutesToRead": "دقيقة قراءة",
          "articleVideo": "فيديو المقال",
          "loggedOutSuccessfully": "تم تسجيل الخروج بنجاح",
          "loggedOutDescription": "تم تسجيل خروجك من إدارة جامشا.",
          "logoutErrorTitle": "خطأ في تسجيل الخروج",
          "logoutErrorDescription": "تم تسجيل خروجك محلياً. إذا استمر الخطأ، يرجى إعادة تسجيل الدخول.",
          "search": "البحث...",
          "newArticle": "مقال جديد",
          "profile": "الملف الشخصي",
          "settings": "الإعدادات",
          "logout": "تسجيل الخروج",
          "adminPanel": "إدارة جامشا",
          "systemAdmin": "مدير النظام",
          "contentManager": "مدير المحتوى",
          "loadingAnalytics": "جاري تحميل التحليلات...",
          "analytics": "التحليلات",
          "analyticsDescription": "تحليلات مفصلة حول أداء موقعك الإلكتروني",
          "last7days": "آخر 7 أيام",
          "last30days": "آخر 30 يوم",
          "last90days": "آخر 90 يوم",
          "lastYear": "السنة الماضية",
          "export": "تصدير",
          "totalPageViews": "إجمالي مشاهدات الصفحة",
          "comparedToLastPeriod": "مقارنة بالفترة السابقة",
          "uniqueVisitors": "الزوار الفريدون",
          "bounceRate": "معدل الارتداد",
          "avgSessionDuration": "متوسط مدة الجلسة",
          "trafficOverview": "نظرة عامة على الزيارات",
          "trafficSources": "مصادر الزيارات",
          "deviceTypes": "أنواع الأجهزة",
          "topPerformingArticles": "أفضل المقالات أداءً",
          "article": "المقال",
          "category": "القسم",
          "views": "المشاهدات",
          "engagement": "التفاعل",
          "publishDate": "تاريخ النشر",
          "unknownAuthor": "مؤلف غير معروف",
          "unknown": "غير معروف",
          "guest": "زائر",
          "by": "بواسطة",
          "emptyValue": "-",
          "view": "عرض",
          "allReports": "جميع التقارير",
          "id": "المعرف",
          "reported": "تم الإبلاغ:",
          "reviewedBy": "تمت المراجعة بواسطة:",
          "reportDetails": "تفاصيل التقرير #{{id}}",
          "reportDetailsTitle": "تفاصيل التقرير",
          "dismissReport": "رفض التقرير",
          "banUserConfirm": "هل أنت متأكد من حظر هذا المستخدم؟ هذا الإجراء لا يمكن التراجع عنه.",
          "deleteCommentTitle": "حذف التعليق",
          "deleteCommentDescription": "هل أنت متأكد من حذف هذا التعليق؟ \"{{content}}\" هذا الإجراء لا يمكن التراجع عنه.",
          "deleteCommentConfirm": "حذف التعليق",
          "failedToDeleteArticle": "فشل في حذف المقال",
          "articleDeletedSuccessfully": "تم حذف المقال بنجاح",
          "articleDeletedDescription": "تم حذف المقال من النظام بنجاح",
          "publishArticle": "نشر المقال",
          "failedToDeleteArticleTitle": "فشل في حذف المقال",
          "articlesDescription": "إدارة مقالاتك الإخبارية والمحتوى",
          "searchArticles": "البحث في المقالات...",
          "allCategories": "جميع الأقسام",
          "politics": "سياسة",
          "technology": "تكنولوجيا",
          "sports": "رياضة",
          "culture": "ثقافة",
          "business": "اقتصاد",
          "science": "علوم",
          "allArticles": "جميع المقالات",
          "loadingArticles": "جاري تحميل المقالات...",
          "noArticlesFound": "لا توجد مقالات",
          "title": "العنوان",
          "published": "منشور",
          "deleteArticle": "حذف المقال",
          "deleteArticleConfirmation": "هل أنت متأكد من حذف المقال \"{{title}}\"? لا يمكن التراجع عن هذا الإجراء.",
          "delete": "حذف",
          "failedToCreateCategory": "فشل في إنشاء القسم",
          "categoryCreatedSuccessfully": "تم إنشاء القسم بنجاح",
          "failedToUpdateCategory": "فشل في تحديث القسم",
          "categoryUpdatedSuccessfully": "تم تحديث القسم بنجاح",
          "failedToDeleteCategory": "فشل في حذف القسم",
          "categoryDeletedSuccessfully": "تم حذف القسم بنجاح",
          "categoryDeletedDescription": "تم إزالة القسم من النظام.",
          "categories": "الأقسام",
          "categoriesDescription": "إدارة أقسام المقالات والتنظيم",
          "newCategory": "قسم جديد",
          "editCategory": "تعديل القسم",
          "createNewCategory": "إنشاء قسم جديد",
          "name": "الاسم",
          "slug": "المعرف",
          "categorySlug": "معرف-القسم",
          "description": "الوصف",
          "color": "اللون",
          "loadingCategories": "جاري تحميل الأقسام...",
          "noCategoriesAvailable": "لا توجد أقسام متاحة",
          "createFirstCategory": "إنشاء القسم الأول",
          "language": "اللغة",
          "noDescription": "لا يوجد وصف",
          "articlesCount": " مقالة",
          "totalCategories": "إجمالي الأقسام: ",
          "deleteCategory": "حذف القسم",
          "welcomeBack": "مرحباً بعودتك، المشرف!",
          "welcomeBackDescription": "إليك ما يحدث مع منصتك الإخبارية اليوم.",
          "totalArticles": "إجمالي المقالات",
          "fromLastWeek": "من الأسبوع الماضي",
          "activeCategories": "الأقسام النشطة",
          "totalViews": "إجمالي المشاهدات",
          "fromLastMonth": "من الشهر الماضي",
          "bookmarks": "المفضلة",
          "subscribers": "المشتركون",
          "viewsOverTime": "المشاهدات عبر الزمن",
          "articlesByCategory": "المقالات حسب القسم",
          "quickActions": "إجراءات سريعة",
          "createArticle": "إنشاء مقال",
          "manageCategories": "إدارة الأقسام",
          "viewSubscribers": "عرض المشتركين",
          "failedToFetchArticle": "فشل في جلب المقال: ",
          "failedToFetchCategories": "فشل في جلب الأقسام",
          "categoryNotFound": "القسم \"{{category}}\" غير موجود",
          "staffWriter": "كاتب الفريق",
          "failedToUpdateArticle": "فشل في تحديث المقال: ",
          "updateError": "خطأ في التحديث:",
          "updatedSuccessfully": "تم التحديث بنجاح",
          "articleUpdatedSuccessfully": "تم تحديث المقال بنجاح!",
          "updateFailed": "فشل في التحديث",
          "failedToUpdateArticleCheckConnection": "فشل في تحديث المقال. يرجى التحقق من الاتصال والمحاولة مرة أخرى.",
          "fileTooLarge": "الملف كبير جداً",
          "imageFileSizeLimit": "يجب أن يكون حجم ملف الصورة أقل من 5 ميجابايت",
          "backToArticles": "العودة إلى المقالات",
          "loadingArticle": "جاري تحميل المقال...",
          "errorLoadingArticle": "خطأ في تحميل المقال",
          "articleId": "معرف المقال: ",
          "checkConsole": "تحقق من وحدة التحكم لمزيد من التفاصيل",
          "articleNotFound": "المقال غير موجود",
          "articleNotFoundDescription": "قد يكون المقال محذوفاً أو المعرف غير صحيح",
          "editArticle": "تعديل المقال",
          "articleDetails": "تفاصيل المقال",
          "titleRequired": "العنوان *",
          "urlSlug": "معرف الرابط (Slug)",
          "createNewArticle": "إنشاء مقال جديد",
          "enterArticleTitle": "أدخل عنوان المقال",
          "urlSlugRequired": "معرف الرابط *",
          "articleUrlSlug": "معرف-رابط-المقال",
          "excerpt": "المقتطف",
          "briefDescription": "وصف مختصر للمقال",
          "contentRequired": "المحتوى *",
          "writeYourArticle": "اكتب محتوى مقالك هنا...",
          "wordCount": "عدد الكلمات: ",
          "words": " كلمة",
          "publishSettings": "إعدادات النشر",
          "categoryRequired": "القسم *",
          "selectCategory": "اختر القسم",
          "selectLanguage": "اختر اللغة",
          "english": "الإنجليزية",
          "arabic": "العربية",
          "french": "الفرنسية",
          "breakingNews": "أخبار عاجلة",
          "authorInfo": "معلومات المؤلف",
          "authorNameRequired": "اسم المؤلف *",
          "authorName": "اسم المؤلف",
          "authorRole": "منصب المؤلف",
          "seniorReporterExample": "مثال: مراسل أول",
          "tags": "الوسوم",
          "addTag": "أضف وسماً",
          "featuredMedia": "الوسائط المميزة",
          "featuredImage": "الصورة المميزة",
          "uploadImageOrUrl": "ارفع ملف صورة (بحد أقصى 5 ميجابايت) أو استخدم الرابط أدناه",
          "enterImageUrl": "أو أدخل رابط الصورة: https://example.com/image.jpg",
          "featured": "مميز",
          "removeImage": "إزالة الصورة",
          "videoUrl": "رابط الفيديو (يوتيوب/فيميو)",
          "youtubeUrlExample": "https://www.youtube.com/watch?v=VIDEO_ID",
          "updating": "جاري التحديث...",
          "updateArticle": "تحديث المقال",
          "hidePreview": "إخفاء المعاينة",
          "showPreview": "عرض المعاينة",
          "articlePreview": "معاينة المقال",
          "articleTitle": "عنوان المقال",
          "articleContentPlaceholder": "محتوى المقال سيظهر هنا...",
          "articleExcerptPlaceholder": "مقتطف المقال سيظهر هنا...",
          "authorNamePlaceholder": "اسم المؤلف",
          "authorRolePlaceholder": "منصب المؤلف",
          "testPodcast": "بودكاست تجريبي",
          "testPodcastSlug": "بودكاست-تجريبي",
          "testPodcastDescription": "وصف تجريبي",
          "testPodcastUrl": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
          "slugPlaceholder": "المعرف (Slug)",
          "addVideo": "إضافة فيديو",
          "editVideo": "تعديل الفيديو",
          "addPodcastVideoDescription": "املأ التفاصيل لإضافة فيديو بودكاست جديد.",
          "updatePodcastVideoDescription": "تحديث تفاصيل فيديو البودكاست.",
          "podcastManagement": "إدارة البودكاست",
          "manageYouTubePodcastVideos": "إدارة فيديوهات بودكاست يوتيوب",
          "publishedAt": "تاريخ النشر",
          "thumbnailUrl": "رابط الصورة المصغرة",
          "duration": "المدة",
          "isFeatured": "مميز",
          "titlePlaceholder": "العنوان",
          "descriptionPlaceholder": "الوصف",
          "videoUrlPlaceholder": "رابط الفيديو (يوتيوب)",
          "durationPlaceholder": "المدة (بالدقائق)",
          "preview": "معاينة",
          "saving": "جاري الحفظ...",
          "save": "حفظ",
          "loadingPodcast": "جاري تحميل البودكاست...",
          "allPodcastVideos": "جميع مقاطع البودكاست ({{count}})",
          "video": "الفيديو",
          "deletePodcastTitle": "حذف البودكاست",
          "deletePodcastDescription": "هل أنت متأكد من حذف \"{{title}}\"? لا يمكن التراجع عن هذا الإجراء.",
          "noChanges": "لا توجد تغييرات",
          "noProfileChanges": "لم يتم إجراء أي تغييرات على الملف الشخصي.",
          "updateSuccess": "تم التحديث بنجاح",
          "profileUpdated": "تم تحديث معلومات الملف الشخصي.",
          "sessionExpired": "الجلسة منتهية الصلاحية. يرجى تسجيل الدخول مرة أخرى.",
          "notEnoughPermissions": "ليس لديك الصلاحيات الكافية لتحديث الملف الشخصي.",
          "usernameOrEmailExists": "اسم المستخدم أو البريد الإلكتروني مستخدم بالفعل.",
          "updateErrorTitle": "خطأ في التحديث",
          "passwordErrorTitle": "خطأ في كلمة المرور",
          "passwordFieldsRequired": "يجب ملء جميع حقول كلمة المرور.",
          "passwordMinLength": "يجب أن تكون كلمة المرور الجديدة 8 أحرف على الأقل.",
          "passwordsDoNotMatch": "كلمة المرور الجديدة وتأكيدها غير متطابقين.",
          "passwordChanged": "تم تغيير كلمة المرور",
          "passwordChangedSuccess": "تم تغيير كلمة المرور بنجاح.",
          "passwordChangeFailed": "فشل في تغيير كلمة المرور",
          "passwordChangeError": "حدث خطأ أثناء تغيير كلمة المرور.",
          "reports": "تقارير التعليقات",
          "reportsDescription": "إدارة تقارير التعليقات المسيئة أو غير اللائقة",
          "all": "الكل",
          "pending": "قيد المراجعة",
          "reviewed": "تمت المراجعة",
          "resolved": "تم الحل",
          "spam": "سبام",
          "harassment": "مضايقة",
          "other": "أخرى",
          "reportedComment": "تعليق مُبلغ عنه",
          "reportedBy": "تم الإبلاغ بواسطة",
          "reportedAt": "تاريخ الإبلاغ",
          "reason": "السبب",
          "markReviewed": "تعيين كمراجَع",
          "markResolved": "تعيين كمحلول",
          "deleteComment": "حذف التعليق",
          "banUser": "حظر المستخدم",
          "failedToFetchReports": "فشل في جلب التقارير",
          "failedToUpdateReport": "فشل في تحديث التقرير",
          "failedToDeleteComment": "فشل في حذف التعليق",
          "commentDeletedSuccessfully": "تم حذف التعليق بنجاح",
          "failedToBanUser": "فشل في حظر المستخدم",
          "userBannedSuccessfully": "تم حظر المستخدم بنجاح",
          "notAvailable": "غير متاح",
          "local": "محلي",
          "administrator": "مدير",
          "editor": "محرر",
          "deviceDesktop": "سطح المكتب",
          "deviceMobile": "الجوال",
          "deviceTablet": "الجهاز اللوحي",
          "sourceGoogle": "جوجل",
          "sourceDirect": "مباشر",
          "sourceSocialMedia": "وسائل التواصل الاجتماعي",
          "sourceEmail": "البريد الإلكتروني",
          "sourceOther": "أخرى",
          "pageViews": "مشاهدات الصفحة",
          "visitors": "الزوار",
          "folder": "ملف",
          "adminEmail": "admin@example.com",
          "dashboard": "لوحة التحكم",
          "topFlop": "جا/مشا",
          "podcast": "بودكاست",
          "users": "المستخدمون",
          "languages": "اللغات",
          "Offensive": "مسيء",
          "adminEmailLabel": "بريد المدير الإلكتروني",
          "Other": "أخرى",
          "Spam": "بريد مزعج",
          "deleteCategoryConfirmation": "هل أنت متأكد من حذف القسم '{{name}}'؟ هذا الإجراء لا يمكن التراجع عنه.",
          "lastPasswordChange": "آخر تغيير لكلمة المرور",
          "passwordChangeAdvice": "لأسباب أمنية، نوصي بتغيير كلمة المرور بشكل دوري.",
          "changePassword": "تغيير كلمة المرور",
          "accountStats": "إحصائيات الحساب",
          "publishedArticles": "المقالات المنشورة",
          "activeSessions": "الجلسات النشطة",
          "accountStatus": "حالة الحساب",
          "manageProfileInfo": "إدارة معلومات ملفك الشخصي",
          "memberSince": "عضو منذ",
          "accountInfo": "معلومات الحساب",
          "usernamePlaceholder": "أدخل اسم المستخدم الخاص بك",
          "emailPlaceholder": "أدخل بريدك الإلكتروني",
          "firstNamePlaceholder": "أدخل اسمك الأول",
          "lastNamePlaceholder": "أدخل اسمك الأخير",
          "savePassword": "حفظ كلمة المرور",
          "passwordRequirements": "يجب أن تتكون كلمة المرور من 8 أحرف على الأقل.",
          "currentPassword": "كلمة المرور الحالية",
          "currentPasswordPlaceholder": "أدخل كلمة المرور الحالية",
          "newPassword": "كلمة المرور الجديدة",
          "newPasswordPlaceholder": "أدخل كلمة المرور الجديدة",
          "confirmPassword": "تأكيد كلمة المرور الجديدة",
          "confirmPasswordPlaceholder": "أعد إدخال كلمة المرور الجديدة",
          "thisWeek": "هذا الأسبوع",
          "forbiddenTitle": "الوصول مرفوض",
          "forbiddenDescription1": "ليس لديك الصلاحية للوصول إلى هذه الصفحة.",
          "forbiddenDescription2": "إذا كنت تعتقد أن هذا خطأ، يرجى الاتصال بالمسؤول.",
          "backToDashboard": "العودة إلى لوحة التحكم",
          "allRightsReserved": "© {{year}} Jamcha. جميع الحقوق محفوظة.",
          "loadingUserData": "جاري تحميل بيانات المستخدم...",
          "page": "صفحة",
          "profileEditNote": "ملاحظة: سيتم عرض هذه المعلومات في ملفك الشخصي العام.",
          "error": "خطأ",
          "failedToFetchAuthors": "فشل في جلب المؤلفين",
          "failedToDeletePodcast": "فشل في حذف البودكاست",
          "noPendingReports": "لا توجد تقارير معلقة للمراجعة.",
          "titleIsRequired": "العنوان مطلوب.",
          "contentIsRequired": "المحتوى مطلوب.",
          "categoryIsRequired": "يرجى تحديد فئة.",
          "subscriberDeleteFailed": "فشل في إزالة المشترك",
          "subscriberDeletedSuccess": "تم حذف المشترك بنجاح",
          "subscriberDeletedDescription": "تمت إزالة المشترك من قائمة النشرة الإخبارية.",
          "userDeletedSuccess": "تم حذف المستخدم بنجاح",
          "userDeletedDescription": "تمت إزالة المستخدم وبياناته من النظام.",
          "invalidUsernameOrPassword": "اسم المستخدم أو كلمة المرور غير صحيحة",
          "currentPasswordIncorrect": "كلمة المرور الحالية غير صحيحة",
          "excerptIsRequired": "المقتطف مطلوب.",
          "socialMediaLinks": "روابط وسائل التواصل الاجتماعي",
          "socialLinks": "روابط اجتماعية",
          // loading translation 
          // ===========
          "pleaseWait": "يرجى الانتظار",
          "loadingContent": "جاري تحميل المحتوى",
          "almostReady": "تقريباً جاهز",
          "preparingExperience": "جاري تحضير تجربتك",
          "connecting": "جاري الاتصال",
          "processingData": "جاري معالجة البيانات",
          "finalizing": "جاري الانتهاء",
          "initializing": "جاري التهيئة",
          "welcome": "مرحباً بك",
          "noAuthTokenFound": "لم يتم العثور على رمز المصادقة",
          "noCurrentUser": "لم يتم العثور على المستخدم الحالي أو اسم المستخدم",
          "permissionDenied": "ليس لديك إذن لتحديث هذا الملف الشخصي.",
          "invalidData": "البيانات المقدمة غير صالحة.",
          "passwordPolicy": "يجب أن تتكون كلمة المرور من 8 أحرف على الأقل وتحتوي على حرف كبير واحد على الأقل وحرف صغير ورقم واحد.",
          "toggle_article_active_confirmation_title_enable": "هل أنت متأكد من تفعيل هذا المقال؟",
          "toggle_article_active_confirmation_title_disable": "هل أنت متأكد من تعطيل هذا المقال؟",
          "toggle_article_active_confirmation_description_enable": "سيتم عرض هذا المقال للعملاء.",
          "toggle_article_active_confirmation_description_disable": "سيتم إخفاء هذا المقال عن العملاء.",
          "enable_article": "تفعيل المقال",
          "disable_article": "تعطيل المقال",
          "enable": "تفعيل",
          "disable": "تعطيل",
          "toggle_subscriber_active_confirmation_title_disable": "هل أنت متأكد من تعطيل هذا المشترك؟",
          "toggle_subscriber_active_confirmation_title_enable": "هل أنت متأكد من تفعيل هذا المشترك؟",
          "toggle_subscriber_active_confirmation_description_disable": "لن يتمكن هذا المشترك من الوصول.",
          "toggle_subscriber_active_confirmation_description_enable": "سيتمكن هذا المشترك من الوصول.",
          "subscriberStateSuccess": "تم تغيير حالة المشترك بنجاح.",
          "Cannot delete category. It contains articles that must be moved or deleted first.": "لا يمكن حذف القسم. يحتوي على مقالات يجب نقلها أو حذفها أولاً.",
          "socialLinkRemoved": "تمت إزالة رابط التواصل الاجتماعي",
          "socialLinkRemovedSuccess": "تمت إزالة رابط التواصل الاجتماعي بنجاح.",
          "emptySocialLinkTitle": "رابط وسيلة تواصل اجتماعي فارغ",
          "emptySocialLinkDesc": "يرجى توفير رابط لجميع روابط وسائل التواصل الاجتماعي أو إزالة الفارغة منها."
        }
      }
    }
  });

// Add direction helper functions after initialization
i18n.dir = (lng?: string) => {
  const language = lng || i18n.language || 'ar';
  return getLanguageDirection(language);
};

i18n.isRTL = (lng?: string) => {
  return typeof i18n.dir === 'function' ? i18n.dir(lng) === 'rtl' : false;
};

// Ensure direction is set on language change
i18n.on('languageChanged', (lng) => {
  const direction = getLanguageDirection(lng);
  document.documentElement.dir = direction;
  document.documentElement.lang = lng;
});

// Force Arabic on initialization
if (typeof window !== 'undefined') {
  // Clear any browser language detection
  localStorage.removeItem('i18nextLng');
  // Set Arabic as default
  localStorage.setItem('i18nextLng', 'ar');
}

// Set initial direction
if (typeof document !== 'undefined') {
  // Force Arabic
  i18n.changeLanguage('ar');
  const initialDirection = getLanguageDirection('ar');
  document.documentElement.dir = initialDirection;
  document.documentElement.lang = 'ar';
}

export default i18n;
